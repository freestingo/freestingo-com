{{ define "main" }}
  <div class="text-zinc-500">current section path: {{ .CurrentSection.Path }}</div>

  {{ range $taxonomyName, $taxonomy := $.Site.Taxonomies }}
    {{ if eq "topics" $taxonomyName }}
      <div class="flex gap-3">
        {{ range $key, $value := $taxonomy }}
          {{ $currentSectionTaxonomies := where $value.Pages ".CurrentSection.Path" $.CurrentSection.Path }}
          {{ if ge $currentSectionTaxonomies 1 }}
            <div class="flex gap-2 items-baseline">
              {{ $taxonomyPermalink := (index (where ((index $currentSectionTaxonomies 0).GetTerms "topics") ".LinkTitle" (title $key)) 0).RelPermalink }}
              <a href="{{ $taxonomyPermalink }}">{{ $key }}</a>
              <div class="text-xs">{{ $currentSectionTaxonomies | len }}</div>
            </div>
          {{ end }}
        {{ end }}
      </div>
    {{ end }}
  {{ end }}

  {{ with .Sections.ByWeight}}
    <div class="not-prose grid grid-cols-1 divide-y divide-zinc-950 dark:divide-zinc-50 text-zinc-950 dark:text-zinc-50">
      {{ range . }}
        <div
          class="grid grid-cols-1 sm:grid-cols-2 items-center gap-2 py-5"
        >
          <a href="{{ .Permalink }}" class="font-bold text-5xl hover:text-emerald-700 dark:hover:text-emerald-600">
              {{ path.Base .CurrentSection.Path | lower | safeHTML }}
          </a>
          <span class="text-base leading-tight">
            {{ .Description }}
          </span>
        </div>
      {{ end }}
    </div>
  {{ end }}

  <div class="divide-y divide-zinc-950 dark:divide-zinc-50 text-zinc-950 dark:text-zinc-50">
    {{ range .RegularPages }}
      {{- partial "article-preview.html" . -}}
    {{ end }}
  </div>
{{ end }}
